<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil do Usu√°rio - DesignFej</title>
    <link rel="stylesheet" href="/css/sidebar.css">
    <link rel="stylesheet" href="/css/perfil.css">

</head>
<body>
    <header>
        <nav>
            <a href="index.html">üè° In√≠cio</a>
            <a href="carrinho.html">üõí Carrinho</a>
            <a href="wishlist.html">üíù Lista de Desejos</a>
            <button class="menu-toggle" onclick="sidebarInstance.toggle()">‚ò∞</button>
        </nav>
    </header>

    <main>
        <div class="perfil-container">
            <div class="perfil-header">
                <div class="perfil-avatar">üë§</div>
                <h1>Meu Perfil</h1>
            </div>
            
            <form id="perfil-form">
                <div class="perfil-info">
                    <div class="info-group">
                        <label for="nome">Nome Completo</label>
                        <input type="text" id="nome" name="nome" placeholder="Digite seu nome completo">
                    </div>
                    
                    <div class="info-group">
                        <label for="email">E-mail</label>
                        <input type="email" id="email" name="email" placeholder="Digite seu e-mail">
                    </div>
                    
                    <div class="info-group">
                        <label for="telefone">Telefone</label>
                        <input type="tel" id="telefone" name="telefone" placeholder="(11) 99999-9999" maxlength="15">
                    </div>
                    
                    <div class="info-group">
                        <label for="cpf">CPF</label>
                        <input type="text" id="cpf" name="cpf" placeholder="123.456.789-00" maxlength="14">
                    </div>
                    
                    <div class="info-group">
                        <label for="endereco">Endere√ßo</label>
                        <input type="text" id="endereco" name="endereco" placeholder="Digite seu endere√ßo">
                    </div>
                    
                    <div class="info-group">
                        <label for="cidade">Cidade</label>
                        <input type="text" id="cidade" name="cidade" placeholder="Digite sua cidade">
                    </div>
                </div>
                
                <div class="btn-group">
                    <button type="submit" class="btn btn-primary">Salvar Altera√ß√µes</button>
                    <button type="button" class="btn btn-secondary" onclick="cancelarEdicao()">Cancelar</button>
                </div>
            </form>
        </div>
    </main>

    <script>
        // M√°scaras
        function mascaraCPF(cpf) {
            return cpf.replace(/\D/g, '').replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
        }
        
        function mascaraTelefone(tel) {
            return tel.replace(/\D/g, '').replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
        }
        
        function validarEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }
        
        // Aplicar m√°scaras
        document.getElementById('cpf').addEventListener('input', function(e) {
            e.target.value = mascaraCPF(e.target.value);
        });
        
        document.getElementById('telefone').addEventListener('input', function(e) {
            e.target.value = mascaraTelefone(e.target.value);
        });
        
        // Carregar dados salvos ao carregar a p√°gina
        window.addEventListener('load', function() {
            const perfil = JSON.parse(localStorage.getItem('perfilUsuario') || '{}');
            if (perfil.nome) document.getElementById('nome').value = perfil.nome;
            if (perfil.email) document.getElementById('email').value = perfil.email;
            if (perfil.telefone) document.getElementById('telefone').value = perfil.telefone;
            if (perfil.cpf) document.getElementById('cpf').value = perfil.cpf;
            if (perfil.endereco) document.getElementById('endereco').value = perfil.endereco;
            if (perfil.cidade) document.getElementById('cidade').value = perfil.cidade;
        });

        document.getElementById('perfil-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            
            // Validar email
            if (email && !validarEmail(email)) {
                alert('Por favor, digite um e-mail v√°lido.');
                return;
            }
            
            // Salvar dados no localStorage
            const perfil = {
                nome: document.getElementById('nome').value,
                email: email,
                telefone: document.getElementById('telefone').value,
                cpf: document.getElementById('cpf').value,
                endereco: document.getElementById('endereco').value,
                cidade: document.getElementById('cidade').value
            };
            localStorage.setItem('perfilUsuario', JSON.stringify(perfil));
            
            alert('Perfil atualizado com sucesso!');
            window.location.href = 'index.html';
        });
        
        function cancelarEdicao() {
            if (confirm('Descartar altera√ß√µes?')) {
                location.reload();
            }
        }
    </script>
    <script src="/js/sidebar.js"></script>
</body>
</html>